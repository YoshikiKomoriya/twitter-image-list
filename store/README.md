# Store（Vuex Store）

素（バニラ）のVuexは使わずに、ヘルパーとして扱えるモジュールの'nuxt-typed-vuex'を利用している

## 設計方針

シンプルに理解できるよう、以下のような役割分担とする

### ステート

- 状態を保持する
- 状態のリセットを実装する場合は、状態の初期化に関する処理を関数化して、それを呼び出す
  - getDefaultState()

#### RootState

素（バニラ）のVuexを利用する場合にも型類推が機能するように、型の定義を出力している

```TypeScript
export const state = () => ({
  hoge: 'hoge'
})
export type RootState = ReturnType<typeof state>
```

### ミューテーション

- アクションからのみ呼び出される
  - 状態の変更に関するフローのシンプルさを保つために、ミューテーション単体の呼び出しは使わない（Vuexの仕様上は可能）
    - 以下のデメリットがあるが、許容する
      - コードが冗長なものになる（余計なアクションが増える）
      - メソッド名の重複が発生しやすい
        - 関数名に定数を利用することでデメリットの軽減を図っている
- 状態の変更
  - 追加・変更・削除
- 汎用的な機能の関数名には定数を使う（mutationTypes.tsを参照）
  - 取得（get）, 削除（delete）など
- なるべくシンプルにする

### アクション

- 外部からの呼び出し（追加・変更・削除）
- 状態のリセット
- データの取得（API通信など）
  - 状態に設定するため、取得したデータを整形する
- アクションの呼び出し

### ゲッター

- 外部からの呼び出し（取得）
- 状態の取得
  - 返却用に取得した状態を整形する

### 参考

Mutation と Action は以下のような違いがある

- 非同期処理を含むことができるかどうか（アクションのみ可）
- 状態を変更できるかどうか（ミューテーションのみ可、アクションはミューテーションをコミットする）

[参考](https://vuex.vuejs.org/ja/guide/actions.html)
